\section{Introduction}
\label{sec:introduction}

Mobile systems consist of walled gardens inside gated communities, \ie{}, locked-down operating systems running on devices that interact over a closed and opaque mobile network. 
As a result, characterizing Internet traffic naturally generated by mobile devices remains an open problem. 
\tbd{Why do we care? variety of options available, different access technologies, data plans, news OSes, new versions of applications, decreasing quota}

The key challenge is that mobile devices and their OSes provide no built-in service for monitoring and reporting \emph{all network traffic}. 
We strongly believe that a comprehensive network usage analysis must not be limited to specific mobile OSes, access technology, device manufacturer, installed applications, and user behavior. 
Previous studies are constrained by at least one of the above dimensions of mobile Internet traffic ~\cite{vallina-rod:ads,gerber:passivespeed,chen:wifi,enck:taintdroid,wang:middleboxes,sommers:cellwifi}, thus provides only partial views of network activity -- compromising network coverage. 
In this work, we are the first to present an approach that compromises none of these, potentially enabling a large-scale deployment and comprehensive view of  mobile Internet traffic across carriers, devices, applications versions, and access technologies.

%For example, researchers with privileged access to data gathered from a cellular carrier's network can 
%report on activity for a large group of users; however, this view does not cover WiFi traffic nor 
%does it speak to traffic generated through other cellular networks.~\cite{anyattstudy} Likewise, studies that instrument 
%an enterprise WiFi network can view traffic from devices subscribing to multiple cellular carriers, but not 
%the traffic flowing over cellular links~\cite{someonedidthis}. Last, researchers have used a fleet of devices running a 
%custom version of Android to perform detailed logging of network activity~\cite{mobilelab}. This can capture all of a device's network 
%traffic but is restricted to measuring Android behavior. Further, subjects must root their own devices or to 
%switch from their primary device for the duration of the study -- barriers that can limit deployment 
%size and introduce bias. 
%\tbd{JS: Concerned about all of this related work -- seems like there's a lot! Also -- why is the fact that WiFi vs Celular traffic a big deal? Apps are apps right? Data is data? I guess performance questions come up but isn't okay that the two are characterized separately? Further, meddle introduces big performance changes so...}
%\drc{TODO: make this a less detailed paragraph -- sum it all up in one sentence with three refs, then say we are the first to to avoid the 
%otherwise inherent trade-offs.}

This paper explores the opportunities for mobile traffic measurement through indirection. 
Specifically, we exploit the fact that most mobile OSes support proxying via virtual private networks (VPNs). 
By sending mobile Internet traffic through a proxy server under our control (an approach we call \platname), we can monitor all flows regardless of device, OS or access technology. 
Importantly, installing a VPN configuration requires neither a new app to be installed nor does it require special or new privileges, thus facilitating large-scale deployment on unmodified device OSes.

We report the results of a 7-month IRB-approved measurement study using this approach both in the lab environment and with human subjects in the wild. 
After demonstrating that our approach incurs reasonable overheads, we describe our measurement methodology and how we use \platname to measure the impact of device OS, apps and service provider on Internet traffic.

Our key contributions are as follows:
\begin{packeditemize}
\item We demonstrate the feasibility of proxy-based measurement for characterizing mobile Internet traffic for iOS and Android. 
\platname captures all Internet traffic generally with less than 10\% power and packet overheads, and negligible additional latency. 
We will make the \platname software and configuration details open source and publicly available by the time of publication.
\item A descriptive analysis of network traffic naturally generated by devices in the wild, across different access technologies. 
We find, for example, that mobile traffic volumes are approximately equally split across WiFi and cellular -- highlighting the importance of capturing both interfaces. 
Further, we find that most traffic is either compressed, or encrypted, thus limiting the opportunities for additional traffic-volume optimization.
\item We characterize the network traffic generated by mobile OSes, and how it varies when using different access technologies.
\item A measurement study of app behavior (both popular and otherwise) from Android and iOS. We observe \tbd{values come here}. 
\tbd{say something about how we can directly observe differences in the network behavior of identical apps designed for different OSes.}
\item An analysis of privacy leaks in the mobile environment. \tbd{Results based on Amy work}.
%\eat{\item A new measurement technique for detecting ISP interference with arbitrary Web site content.}
\item \tbd{Results from an on going IRB based study of 30 users. We use these results to compare our observations from exisiting studies. The key take home is that these measurements were did not require custom OSes, ISP support, or support from marketplaces, warranty voiding of devices.}
\end{packeditemize}
\eat{
\tbd{The above is a laundry list -- can we highlight three or four things at most? Sort of macro points and get to the details later?}
The remainder of the paper is organized as follows:
\tbd{Things to highlight in Intro\\
Tools\\
Techniques\\
Methodology\\
Insights}
\tbd{Justine: Primary concern is that the secondary paragraph doesn't sell this as very novel -- others have all done this before is sort of the lesson I learned there. What's new?
After reading this, I think we need to say, "comprehensive network usage analysis" is part of what's new here - we can track users across multiple networks and platforms; this allows us to say that x fraction of traffic is over 3G and y fraction is over WiFi, that bandwidth usage changes by x percent wen moving betwen 3G and Wifi." Because it's easy to install, this means that we can study large numbers of people (given IRB constraints) with little overhead.
One additional thing is we should call out what findings we have are new -- it doesn't matter if our methodology is new at all if we have sexy new discovery X property of network traffic/app behavior/etc.
}}

\tbd{Make these into contributions, edit text}
Controlled experiments for more than 1,200 apps for both iOS and Android
In-the-wild data collection spanning 7 months, 21 users and 26 devices.

Using 3 \platname{} servers, we observe traffic from 54 ASes, 9 of which are cellular. 
First study to report a holistic view of network traffic from real user devices. We find that 
traffic is split nearly evenly between WiFi and cellular (60/40), highlighting that focusing 
on only one network type misses approximately half the network activity. Further, we 
find significant differences in device usage over cell vs WiFi, indicating that studies focusing 
on only one network type are missing a qualitatively different portion of network activity. 
\tbd{What fraction of flows are SSL or gzip?}

A previously proposed technique for classifying mobile network traffic fails to work for the 
vast majority of apps we tested, particularly for Android apps. This is because the user-agent 
field often is blank or contains the name of a popular third-party library. We show that combining 
user-agent with Host fields significantly improves classification, particularly for data gathered 
in the wild. High-precision classification of app-generated traffic, however, remains an open problem. 

First characterization of SSL traffic that goes beyond using simple port numbers. We use 
certificate information and DNS lookups to accurately identify which apps are generating HTTPS flows.
While Google services, mail, social networks, app stores and instant messaging are the most 
popular services, we see significant differences in the bytes consumed by each service across 
OSes. This has significant implications for mobile service data plans.

Study of PII leaked by mobile apps in controlled settings and in the wild. To the best of our knowledge, 
we are the first to identify and disclose leakage of highly sensitive information such as usernames, 
e-mails and passwords in plaintext for several popular iOS apps. We further use our in the wild 
data to demonstrate the extent to which users are being tracked by mobile devices over time 
and across access technologies. 

We designed and built a new visualization tool that allows users to track and control how 
they are being tracked. \platname{}'s \emph{ConVis} tool borrows the Mozilla project's Collusion 
interface, but applies it to all mobile device traffic. Further, it provides a visual interface that allows 
 users to specify block lists for connections based on (app, 3rd party) tuples. A demo of our tool is 
 located at \url{http://daemonfstudios.com/demos/meddleVis2/}.
 


%%% Local Variables: ***
%%% mode:latex ***
%%% TeX-master: "main.tex"  ***
%%% End: ***


