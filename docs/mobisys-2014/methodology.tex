\section{Datasets Description}
\label{sec:dataset}
Using \platname, we collected full packet traces from Internet activity generated by
mobile devices. We use this data to study how to map monitored traffic to applications, and to
analyze PII leakage. Below, we describe our data-collection methodology, which consists of
1) controlled experiments in a lab setting and 2) IRB-approved ``in the wild'' measurements 
gathered from real users during seven months.

\subsection{Controlled Experiments}
\label{sec:dataset-contr-exper}
Our goal with controlled experiments is 1) to obtain ground truth information 
about network flows generated by apps and devices, and 2) characterize the 
network activity for a large variety of popular apps in a lab setting. We use 
this data to understand how to map network flows to the app that generated 
them, and how to identify PII in those network flows. 

\noindent\textbf{Device setup.} We conducted our controlled experiments using three devices: a Galaxy
Nexus running Android 4.2, a Google Nexus running Android 4.0, and
an iPhone 3GS running iOS 6. We start each set of controlled experiments
 with a factory reset of the device to ensure that software installed by previous 
 experiments cannot impact the network traffic generated by each device. 
 Then we connect the device to the
\platname{} platform, we enable the SSL-Bumping plugin, and begin
the experiment. 

\noindent\textbf{Manual tests.} We manually test the
100 most popular free Android apps in the \emph{Google Play} store and 209
iOS applications from the iOS App store on April 4, 2013. For each
application, we install it, enter user credentials for the account if
it is relevant, interact with it for up to 10 minutes, and uninstall
it. This allows us to characterize real user interactions with popular applications 
in a perfectly controlled environment. Note that 
because we enter a unique and distinguishable set of user credentials when 
interacting with apps, we can easily extract the corresponding PII from 
network flows (if they are not obfuscated).

\noindent\textbf{Automated tests.} The second set of controlled experiments consist of fully-automated
experiments on the most popular 908 Android applications from a free,
third-party Android market, \emph{AppsApk.com}~\cite{appsapk}.
We perform this test because Android devices can install
\emph{Third-party applications} that are not available on the
\emph{Google Play} store, without requiring the user to root the device. 

Our goal is to understand how these apps differ from those in the standard \emph{Google Play} 
store, as they are not subject to Google Play restrictions.
%\tbd{Is there different constraints on this free market, AR: They do not have paid application. All apps must be free.}
We automate experiments using \emph{adb} to
install each app, connect the device to the \platname{} platform, and
start the app. Then we use \emph{Monkey}~\cite{adbmonkey}, an app-scripting 
tool, to perform a series of 10,000 actions that include
random swipes, touches, and text entries.  Finally, we use adb to
uninstall the application and reboot the device to forcibly end any
lingering connections. This set of experiments is limited to
Android devices because iOS does not provide equivalent 
scripting functionality. 

% The results of our controlled experiments can be found in
% \fref{sec:manual-testing}.

\subsection{In The Wild Measurements}
\label{sec:dataset-wild-measurements}

The controlled experiments in the previous section provide us with 
ground-truth information for a large number of apps running in a controlled 
setting for a short period of time. To understand the network behavior of 
devices with real users "in the wild" over longer time periods, we conducted 
an IRB-approved measurement study with a small set of subjects, from 
Oct. 20, 2012 to May 20, 2013.\footnote{The measurement study is ongoing, we report the most recent subset of results.}

We deployed two \platname servers, one in the USA and one in France
that were used by 26 devices: 10 iPhones, 4 iPads, 1 iPodTouch, and 11
Android phones.  The Android devices in this dataset include the
Nexus, Sony, Samsung, and Gsmart brands while the iPhone devices
include one iPhone~3GS, four iPhone~5, and five iPhone~4S.  These
devices belongs to 21 different users, volunteers for our IRB approved
study.  This dataset, called \mobWild, consists of 208 days with data; the number of 
days for each user varies from 5 to 205 with a median of 35 days.  For privacy reasons, the
SSL-Bumping plugin is \emph{disabled} for all measurements involving
real users.

Capturing all of a subject's Internet traffic raises significant
privacy concerns.  Our IRB-approved study entails informed consent
from subjects who are interviewed in our lab, where the risks and
benefits of our study are clearly explained.  The incentive to use
VPNs is Amazon.com gift certificates awarded by lottery. To protect the
identity of information leaked in the data, we use public key
cryptography to encrypt all data before storing them 
on disk; the private key is
maintained on separate secure severs and with access limited to
approved researchers.  Further, subjects are free to delete their
data and disable monitoring at any time.  Per the terms of our IRB, we cannot 
make this data publicly available due to privacy concerns. We are investigating 
alternative data-collection techniques that provide user anonymity sufficient 
for sharing with other researchers.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "main"
%%% End: 


