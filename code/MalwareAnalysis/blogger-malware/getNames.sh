#!/bin/bash
#This script takes a directory name, reads all the apks in it.
# It installs each apk onto the phone. Then it runs a 10,000 monkey random actions.
# It then uninstalls and reflashes (with an image optionally).

fileList="./allapkList.txt"
apkFolder="./allapks/"

# Restart the device to enter a clean state
while read fileId
do
  apkName=${apkFolder}/${fileId}
  packagename=$(aapt dump badging "${apkName}" | grep "package" | awk -F ' ' '{print $2}' | awk -F "'" '{print $2}')
  echo -n -e "${fileId}\t${packagename}\n"
done < ${fileList}
