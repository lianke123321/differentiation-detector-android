# Lines that begin with # are comments 
# Lines that begin with $>  indicate bash prompt
# Line that begin with mysql> indicate mysql prompt

$> mysql_secure_installation

# Set the root password and disable remote root login
# Steps taken from http://dev.mysql.com/doc/refman/5.1/en/adding-users.html

$> mysql --user=root -p 
pass: <root password> 
# I have used root for the time being

mysql> CREATE USER 'meddle'@'localhost' IDENTIFIED BY 'meddle';

mysql> GRANT ALL PRIVILEGES ON *.* TO 'meddle'@'localhost' WITH GRANT OPTION;

mysql> CREATE DATABASE MeddleDB;

$> mysql -u meddle -p MeddleDB
Enter password: <meddle password>

mysql> CREATE TABLE UserConfigs (userID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, userName VARCHAR(512), filterAdsAnalytics INT NOT NULL DEFAULT 0, UNIQUE(userName)) ENGINE="InnoDB";

# For each user add this entry to the table while creating users
mysql> INSERT INTO UserConfigs VALUES (0, 'arao-ipod', 0);

mysql> CREATE TABLE UserTunnelInfo (rowID SERIAL PRIMARY KEY, userID INT NOT NULL, clientTunnelIpAddress VARCHAR(64) NOT NULL, clientRemoteIpAddress VARCHAR(64) NOT NULL, serverIpAddress VARCHAR(64) NOT NULL, timestamp TIMESTAMP NOT NULL  DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, startStopFlag BOOLEAN NOT NULL DEFAULT 0) ENGINE="InnoDB"; 
mysql> ALTER TABLE UserTunnelInfo ADD INDEX (timestamp);

mysql> CREATE TABLE UserFilterAdsChange(userID INT NOT NULL PRIMARY KEY, timestamp TIMESTAMP NOT NULL  DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, filterAdsAnalytics INT NOT NULL DEFAULT 0);


