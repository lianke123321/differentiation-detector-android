# ALL FILES IN THIS FOLDER ASSUME THAT STRONGSWAN HAS BEEN INSTALLED IN THE MEDDLE_ROOT FOLDER
certificate.config - the file that path to meddle.config. Note that signingCertsPath is the folder in which CA certificates need to be present

gen-CA-Certs.sh - generate the CA certificates and installs them in signingCertsPath. This step can be ignored if the signingCertsPath contains previously generated certificates and keys. 

gen-Server-Certs.sh - generates the certificates for the Meddle Server. Assumes that the CA certificates are present in the signingCertsPath. The certificateand keys are installed in the folder strongswan expects them to be (In private and certs folder of MEDDLE_ROOT/etc/ipsec.d)

addMeddleUser.sh - generates the certificates for the Meddle Server. All files generated by this script are available in in the clientCertsPath.

EXAMPLE TO MANUALLY GENERATE THE CERTIFICATES
* Generate the certificates for the CA.

  /data/usr/sbin/ipsec pki --gen --outform pem > MeddleCAKey.pem

  /data/usr/sbin/ipsec pki --self --in MeddleCAKey.pem --dn "C=US, O=Meddle, CN=Meddle CA" --ca --outform pem > MeddleCACert.pem
* Generate the certificates for the server

  /data/usr/sbin/ipsec pki --gen --outform pem > MeddleServerKey.pem

  /data/usr/sbin/ipsec pki --pub --in MeddleServerKey.pem | /data/usr/sbin/ipsec pki --issue --cacert MeddleCACert.pem --cakey MeddleCAKey.pem --dn "C=US, O=Meddle, CN=meddle.cs.washington.edu" --san="meddle.cs.washington.edu" --flag serverAuth --flag ikeIntermediate --outform pem > MeddleServerCert.pem
* Generate the keys for the Client

  /data/usr/sbin/ipsec pki --gen --outform pem > clientKey.pem

  /data/usr/sbin/ipsec pki --pub --in clientKey.pem | /data/usr/sbin/ipsec pki --issue --cacert caCert.pem --cakey caKey.pem --dn "C=US, O=snowmane, CN=client" --outform pem > clientCert.pem

  openssl pkcs12 -export -inkey clientKey.pem -in clientCert.pem -name "client" -certfile caCert.pem -caname "snowmane CA" -out clientCert.p12
     Enter Export Password: testing
     Verifying - Enter Export Password: testing
  Note that the above password is for the certificate. This is required during installing the certificate
